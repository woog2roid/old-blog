---
title:  "'git을 공부해보자' - 3, 원격저장소"

categories:
  - git
tags:
  - git을 공부해보자
---

__이 글은 'git'에 대해서 필자가 공부한 내용을 보기 편하게 정리한 것이다.__

내가 공부한 것을 정리하겠다고 github 블로그를 시작하였지만, (git이라고는 이전에 약간의 프로젝트를 끄적거려본 것이 다였기에) git과 github에 대해 아는 것이 거의 없었다. 포스팅을 위해 처음 블로그를 시작하며 초기 설정은 구글링으로 때웠으며, git add . --> git commit -m "(commit message)" --> git push origin master, 이 정도의 명령어를 기계적으로 외워서 치고있는 내 모습을 보였다.  
 
 제대로 공부를 해봐야 겠다는 생각에, 인프런에서 _"지옥에서 온 git"_ 을 들으며 공부를 시작하게 되었다.  

조금씩 git을 공부해가며 그때그때 학습한 내용을 정리하며 시리즈물로 작성할 생각이다. 물론, 이 또한 필자의 입장에서 공부한 것을 기록하는 것이기 때문에, 이미 숙지하고 있는 내용들은 들어가 있지 않기도 하다.

# 1. github로 원격저장소 생성해보기

## 원격저장소는 뭐지? github는 뭐야?
우선, 이 [영상](https://www.youtube.com/watch?v=YFNQwo7iTNc)을 보면 git과 github의 관계에 대해 정확하게 알지 않을까 싶다. 짧은 영상이지만 정말 명쾌하게 git과 github를 알려주었기 떄문이다. 아마 많은 사람들이 github의 이름때문에 git과 헷갈리는 것 같다.  

원격(remote)저장소는 로컬저장소와는 대비되는 개념으로, 외부 저장소에 나의 파일들을 올림으로써, 소스코드를 백업하거나, 다른 사람과의 협업을 할 수도 있다. github이 git 원격저장소를 제공해주는 서비스라고 생각하면 된다. 물론 자신이 서버를 가지고 있다면, 그 서버를 원격저장소로 이용할 수도 있다.

## github로 원격저장소 만들기
__git remote add origin (link)__  
link를 뒤에 달음으로써 해당 원격저장소와 나의 현재 로컬저장소를 연결시키는 명령이다. 뒤에 나오는 origin은 원격저장소의 별칭으로 생각할 수 있다. 기본 branch가 master인 것처럼, 관습적으로 메인이 되는 원격저장소의 이름을 origin이라고 한다. 물론 origin말고 다른 이름으로도 원격저장소를 설정할 수 있다. 

__git remote remove (~~)__  
git remote remove origin과 같이 이용한다. 뒤에 원격저장소의 별칭을 적어서 해당 원격저장소를 지울 수 있다.

__git remote__  
해당 명령어를 통해 원격저장소들의 list를 확인해볼 수 있다. -v 옵션을 통해서 더 자세한 사항들도 확인이 가능하다. 

# 2. 동기화 작업을 실행해보기
__git push -u origin master__  
원격저장소로 push하는 명령어이다. master branch를 origin 원격저장소로 push하겠다는 뜻이다. 또한, -u옵션은 최초에 push할 때만 필요한 옵션이다.

__git clone (https://github.com/woog2roid/woog2roid.github.io.git) (directory)__  
해당 링크의 원격저장소를 directory로 복사해온다. origin과 같은 설정이 되어있다. 또한 git init이 되어있지 않아도 가능하다. 진행중이던 프로젝트를 새로운 저장소에서 시작하기 위해 처음 가져올 때 쓰인다.

- 필자는 github 블로그를 다시 운영하게 되면서, 원래 있던 원격저장소에서 .ZIP으로 다운로드 한 적이 있었다. _ZIP으로 다운로드 하게 되면 .git파일들은 제외하고 다운로드를 하기 때문에, 그로 인해 오류가 나서 push가 정상적으로 되지 않은 경험이 있었다._ 그리고 구글에서 알려준 해법은 무려 강제 푸시...였고, commit message가 날라가 버렸다... github에서 확인해보면 first commit이 아니고 README로 되어있는 것들은 이러한 이유로 이렇게 되었다. _다운 받아서 commit을 진행할 거라면 꼭 git clone명령을 사용하도록 하자.._

__git pull origin master__  
원격저장소 origin에서 master branch로 가져오는 명령어이다. PC_1에서 작업을 하다가 push를 하고 장소를 옮겨 PC_2에서 작업을 할 때 해당 명령을 하여 PC_1에서 한 작업들을 모두 가져올 수 있다. _비로소 백업과 협업에 직접적으로 관여하는 명령어를 배운 것이다._ push & pull은 git을 통해 협업을 한다고 하면 무조건적으로 알아야 하는 명령이다.

__git fetch__  
원격저장소에서 최신 버젼을 가져오기'만' 한다. 이게 무슨 말이냐면, 외부에서 작성한 코드를 fetch를 통해 가져오고 git log --branches --decorate를 통해 확인하면, 로컬저장소의 master branch와 origin의 master의 버전의 차이가 존재하게 된다. _정말 말 그대로, 원격 저장소의 버전을 가져오기만! 한것이다._ 이러한 기능은 정교하게 확인을 할 떄 이용된다. fetch를 한 이후에 _git diff HEAD orign/master_ 를 통해서 원격저장소와 로컬저장소의 차이를 확인할 수 있기 떄문이다. 후에 _git merge origin/master_ 를 통해 병합해주면 git pull과 동일한 동작이 된다. 

# 3. push-pull 시뮬레이션
컴퓨터 전공 수업을 듣다보면, 특히 네트워크 분야에서, 이렇게 시뮬레이션을 해보는 것을 자주 볼 수 있다. 원격으로 두 컴퓨터에서 push-pull을 하는 상황을 그려보면서 기능을 이해해보자.

1. 집에서 작업을 마치고 push를 하였다. 
2. 사무실에 와서 pull로 집에서 한 작업읋 가져오고, push를 통해 다시 작업을 올렸다.
3. 집에서 다시 작업을 하는데 까먹고 pull을 하지 않고 작업을 한 후 push를 하였다.  

__1~2번의 상황에서는 어떤 일이 일어날까?__    
1~2번에서는 문제는 없는 듯 보인다. 2번에서 pull을 하면, 1번에서 push한 것과 동일한 작업들이 로컬저장소로 들어와있을 것이다. 물론 당연하게도 버전 history도 동일할 것이다.

__그렇다면 3번의 상황에서는 무슨 일이 일어날까?__  
일단, 3번의 상황에서는 push를 함에 앞서서 먼저 오류를 띄워줄 것이다. git에서는 원격저장소와 로컬저장소의 버전을 살펴보고 오류가 있다고 느껴지면, 우선은 reject를 하기 때문이다. (hint)를 통해 git에서 이러한 문제들 때문인 것 같다고 친절하게 알려주니 hint들을 꼼꼼하게 읽어보는 것이 좋다.

__3번 상황에서 다시 pull을 하게 되면 어떻게 될까?__  
우선, pull은 fetch + merge로 표현이 가능하다. fetch는 원격저장소의 버전을 그대로 가져오는 것이라한다면, pull은 원격저장소와 로컬저장소를 merge해주는 기능도 지니고 있다. 3번의 상황 같은 경우에는 pull을 하지 않고 작업을 해서 일종의 branch가 생겨버린 상황이다. (원격저장소와 로컬저장소가 일정 지점에서 서로 다른 작업을 했다는 말이다.) 그렇기 때문에 이러한 상황에서 pull을 하면 자동적으로 commit 하나가 더 생성된다. 원격저장소와 로컬저장소를 merge하는 recursive strategy가 발동했다고 생각하면 된다.

__또한 충돌을 막아주기 위해 pull과 push는 최대한 자주해주는 것이 좋다.__ 

# 이번 포스트를 마치며,
- 드디어 원격저장소의 개념을 배웠다. 사실 git을 사용하면 보통 로컬저장소만 사용하지 않고 원격저장소 까지 사용을 하기 때문에 어느정도 아는 내용이긴 했지만, 체계적으로 안다는 것은 중요한 것...임을 또 깨달았다. 좀 제대로 아는 느낌이 든다
- _요즘 본질이 중요하다는 것을 git이던 주변에 다른 공부던 여러가지를 통해 깨닫는다._ git을 잘 다루는 것도 중요하지만, 기술은 계속 변하니까 언젠가는 git을 사용하지 않고 다른 서비스를 사용할 날도 오겠다는 생각도 든다. 그러면 git을 잘 사용하는 것이 중요할까? 버전관리 시스템과 협업, 백업 등의 원리와 개념을 이해하는 것이 중요할까?, git의 명령어만(!) 배우고 싶다면, --help 명령어를 통해 충분히 배울 수 있을 것이다.